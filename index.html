<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Minecraft GeoGuessr</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial, sans-serif; background: #222; color: #eee; margin: 0; padding: 0; }
    .container { max-width: 800px; margin: 40px auto; background: #333; padding: 24px; border-radius: 12px; }
    h1 { text-align: center; }
    .screenshot { width: 100%; border-radius: 8px; margin-bottom: 16px; }
    .map-container { position: relative; display: inline-block; }
    .map-img { width: 100%; border-radius: 8px; cursor: crosshair; }
    .marker {
      position: absolute;
      width: 22px; height: 22px;
      background: #f00; border: 2px solid #fff; border-radius: 50%;
      pointer-events: none;
      transform: translate(-50%, -50%);
      box-shadow: 0 0 8px #000a;
    }
    .scoreboard, .results { margin-top: 20px; text-align: center; font-size: 1.2em; }
    button { padding: 8px 16px; font-size: 1em; border: none; border-radius: 6px; background: #3c7; color: #fff; margin: 12px 6px; cursor: pointer; }
    button:disabled { background: #999; cursor: not-allowed; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Minecraft GeoGuessr</h1>
    <div id="game">
      <img id="screenshot" class="screenshot" src="" alt="Location Screenshot">
      <div class="map-container" id="map-container" style="max-width: 600px;">
        <img id="map-img" class="map-img" src="" alt="Server Map">
        <div id="guess-marker" class="marker" style="display:none;"></div>
        <div id="answer-marker" class="marker" style="background:#0cf; display:none;"></div>
      </div>
      <div class="scoreboard">
        <span id="round-info"></span> | Score: <span id="score">0</span>
      </div>
      <div class="results" id="results"></div>
      <div style="text-align:center;">
        <button id="next-btn" style="display:none;">Next Round</button>
        <button id="restart-btn" style="display:none;">Restart Game</button>
      </div>
    </div>
    <div id="instructions" style="margin-top:24px; text-align:center;">
      <strong>How to play:</strong> <br>
      Look at the Minecraft screenshot above.<br>
      Click on the map where you think the screenshot was taken.<br>
      Try to get as close as possible for maximum points!
    </div>
  </div>

  <script>
    // Example round data -- replace with your own images and correct coordinates!
    const rounds = [
      {
        screenshot: "https://raw.githubusercontent.com/Penguinleader4/TEST/main/images/image.png",
        map: "https://raw.githubusercontent.com/Penguinleader4/TEST/main/images/image.png",
        answer: { x: 356, y: 212 }
      },
      {
        screenshot: "https://raw.githubusercontent.com/Penguinleader4/TEST/main/images/image.png",
        map: "https://raw.githubusercontent.com/Penguinleader4/TEST/main/images/image.png",
        answer: { x: 150, y: 380 }
      },
      // Add more rounds here!
    ];

    // Game state
    let currentRound = 0;
    let score = 0;
    let guessed = false;

    // DOM elements
    const screenshot = document.getElementById('screenshot');
    const mapImg = document.getElementById('map-img');
    const mapContainer = document.getElementById('map-container');
    const guessMarker = document.getElementById('guess-marker');
    const answerMarker = document.getElementById('answer-marker');
    const roundInfo = document.getElementById('round-info');
    const scoreSpan = document.getElementById('score');
    const results = document.getElementById('results');
    const nextBtn = document.getElementById('next-btn');
    const restartBtn = document.getElementById('restart-btn');

    function loadRound() {
      guessed = false;
      results.textContent = '';
      nextBtn.style.display = 'none';
      answerMarker.style.display = 'none';
      guessMarker.style.display = 'none';
      screenshot.src = rounds[currentRound].screenshot;
      mapImg.src = rounds[currentRound].map;
      roundInfo.textContent = `Round ${currentRound + 1} / ${rounds.length}`;
    }

    function showMarker(marker, x, y) {
      marker.style.left = x + "px";
      marker.style.top = y + "px";
      marker.style.display = "block";
    }

    function handleGuess(e) {
      if (guessed) return;
      const rect = mapImg.getBoundingClientRect();
      const x = Math.round(e.clientX - rect.left);
      const y = Math.round(e.clientY - rect.top);
      showMarker(guessMarker, x, y);

      // Calculate distance to answer
      const answer = rounds[currentRound].answer;
      showMarker(answerMarker, answer.x, answer.y);
      answerMarker.style.display = "block";
      const dx = x - answer.x;
      const dy = y - answer.y;
      const distance = Math.round(Math.sqrt(dx * dx + dy * dy));
      let roundScore = Math.max(0, 500 - distance); // Out of 500, closer = better
      score += roundScore;
      scoreSpan.textContent = score;
      results.textContent = `You were ${distance} pixels away! You scored ${roundScore} points.`;
      guessed = true;

      // Next or restart
      if (currentRound < rounds.length - 1) {
        nextBtn.style.display = 'inline-block';
        restartBtn.style.display = 'none';
      } else {
        results.textContent += `\nGame over! Final score: ${score}`;
        nextBtn.style.display = 'none';
        restartBtn.style.display = 'inline-block';
      }
    }

    mapImg.addEventListener('click', handleGuess);

    nextBtn.onclick = function() {
      currentRound++;
      loadRound();
    };

    restartBtn.onclick = function() {
      currentRound = 0;
      score = 0;
      scoreSpan.textContent = score;
      loadRound();
      restartBtn.style.display = 'none';
    };

    // Start
    loadRound();
  </script>
</body>
</html>
